(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{100:function(e,t){},102:function(e,t){},109:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(45),i=n.n(r),o=(n(52),n(3)),l=n(46),u=n.n(l),s=n(20),f=n.n(s);var m=function(){var e=Object(c.useState)(),t=Object(o.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)(),l=Object(o.a)(i,2),s=l[0],m=l[1],d=Object(c.useState)([]),v=Object(o.a)(d,2),b=v[0],O=v[1],g=Object(c.useState)(!1),j=Object(o.a)(g,2),E=j[0],p=j[1],h=Object(c.useState)(""),S=Object(o.a)(h,2),D=S[0],k=S[1],C=Object(c.useState)(),w=Object(o.a)(C,2),y=w[0],N=w[1],U=Object(c.useRef)(),M=Object(c.useRef)(),R=Object(c.useRef)();return Object(c.useEffect)((function(){R.current=u.a.connect("/");document.querySelector("#vid");navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){m(e),U.current&&(U.current.srcObject=e)})).catch((function(e){console.log("Something went wrong!")})),R.current.on("yourID",(function(e){r(e)})),R.current.on("allUsers",(function(e){O(Object.keys(e))})),R.current.on("incomingCall",(function(e){p(!0),k(e.from),N(e.signal),console.log(e)}))}),[]),a.a.createElement("div",{className:"mainDiv"},a.a.createElement("h1",{className:"friendsOnline"},"Friends Online"),b&&b.length>0&&a.a.createElement("div",{className:"friendsDiv"},b.map((function(e){if(e!==n)return a.a.createElement("a",{href:"",className:"callFriendBtn",onClick:function(t){t.preventDefault(),function(e){var t=new f.a({initiator:!0,trickle:!1,stream:s});t.on("signal",(function(t){R.current.emit("callUser",{userToCall:e,signalData:t,from:n})})),t.on("stream",(function(e){M.current&&(M.current.srcObject=e)})),R.current.on("callAccepted",(function(e){t.signal(e),console.log(e)}))}(e)}},"Call ",e)}))),a.a.createElement("div",{className:"videosDiv"},a.a.createElement("div",{id:"container"},a.a.createElement("video",{autoPlay:!0,muted:!0,id:"vid",ref:U})),a.a.createElement("div",{id:"container"},a.a.createElement("video",{autoPlay:"true",id:"friendVid",ref:M}))),E&&a.a.createElement("div",null,a.a.createElement("h1",null,"You are receiving a call from ",D,"!"),a.a.createElement("button",{onClick:function(){p(!1);var e=new f.a({initiator:!1,trickle:!1,stream:s});e.on("signal",(function(e){R.current.emit("acceptCall",{signal:e,to:D})})),e.on("stream",(function(e){M.current.srcObject=e})),e.signal(y)}},"Accept Call")))};i.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(m,null)),document.getElementById("root"))},47:function(e,t,n){e.exports=n(109)},52:function(e,t,n){},82:function(e,t){}},[[47,1,2]]]);
//# sourceMappingURL=main.0183ad77.chunk.js.map